# View Page: `User/Login.php`

## Source file
- `src/Views/User/Login.php`

## Role of this view
Standalone login page UI.

Unlike most pages, it does **not** include `Views/Layout/Header.php`; it outputs its own full HTML document.

## Route / controller relationship
Route:
- `page=login` → `UserController::login()` which includes `views/User/Login.php`

This view expects controller-provided variables for old input, error messages, and CSRF token.

## Variables expected (inputs)
- `$csrfToken` (string, optional): CSRF token generated by controller.
- `$old` (array, optional): previous form values (e.g. `['email' => ...]`).
- `$errors` (array|string, optional): validation or auth errors.
- `$message` (string|null, optional): informational message.
- `$action` (string, optional): defaulted but not consistently used (the form action is hardcoded later).

## Forms and endpoints
- Main form:
  - `method="post"`
  - `action="index.php?page=Login"` (note uppercase `Login`)
  - Fields:
    - `csrf_token` (hidden)
    - `email`
    - `password`
    - `remember` (checkbox; currently not used by `UserController`)

Links:
- Forgot password: `index.php?page=forgot-password`
- Register: `index.php?page=register`

## Line-by-line (block-by-block)

### Lines 1–11: defaults + helper
- Sets default values for `$action`, `$old`, `$errors`, `$message`.
- Defines `e($v)` helper to HTML-escape output.

### Lines 13–38: HTML head and styles
- Outputs document skeleton and inline CSS.

### Lines 40–43: branding header
- Site title link to `index.php`.

### Lines 44–62: alerts
- Displays `$message` if present.
- Displays `$errors` (array or string) if present.

### Lines 63–92: login form
- Includes CSRF hidden input when `$csrfToken` exists.
- Email prefilled from `$old['email']`.
- Reminder text about rate limiting.

### Lines 95–97: register prompt

## Side effects
- None (pure rendering).

## Notable caveats
- Casing inconsistency:
  - route is `page=login` in router, but form posts to `page=Login`.
  - On the current router implementation, `strtolower($page)` is used, so this still works.
- This page does not include the site-wide header/nav.
